<!DOCTYPE html>
<!--[if IE 7]>
<html class="ie ie7 no-js" lang="en-US">
<![endif]-->
<!--[if IE 8]>
<html class="ie ie8 no-js" lang="en-US">
<![endif]-->
<!--[if !(IE 7) | !(IE 8)  ]><!-->
<html class="no-js" lang="en-US">
<!--<![endif]-->
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link rel="profile"  href="https://gmpg.org/xfn/11" />
		<link rel="pingback" href="https://www.netnea.com/cms/xmlrpc.php" />
		<script>(function(html){html.className = html.className.replace(/\bno-js\b/,'js')})(document.documentElement);</script>
<title>Minimal NGINX Configuration &#8211; Welcome to netnea</title>
<meta name='robots' content='max-image-preview:large' />
<link rel='dns-prefetch' href='//s.w.org' />
<link rel="alternate" type="application/rss+xml" title="Welcome to netnea &raquo; Feed" href="https://www.netnea.com/cms/feed/" />
<link rel="alternate" type="application/rss+xml" title="Welcome to netnea &raquo; Comments Feed" href="https://www.netnea.com/cms/comments/feed/" />
<script type="text/javascript">
window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/13.1.0\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/13.1.0\/svg\/","svgExt":".svg","source":{"concatemoji":"https:\/\/www.netnea.com\/cms\/wp-includes\/js\/wp-emoji-release.min.js?ver=5.9.3"}};
/*! This file is auto-generated */
!function(e,a,t){var n,r,o,i=a.createElement("canvas"),p=i.getContext&&i.getContext("2d");function s(e,t){var a=String.fromCharCode;p.clearRect(0,0,i.width,i.height),p.fillText(a.apply(this,e),0,0);e=i.toDataURL();return p.clearRect(0,0,i.width,i.height),p.fillText(a.apply(this,t),0,0),e===i.toDataURL()}function c(e){var t=a.createElement("script");t.src=e,t.defer=t.type="text/javascript",a.getElementsByTagName("head")[0].appendChild(t)}for(o=Array("flag","emoji"),t.supports={everything:!0,everythingExceptFlag:!0},r=0;r<o.length;r++)t.supports[o[r]]=function(e){if(!p||!p.fillText)return!1;switch(p.textBaseline="top",p.font="600 32px Arial",e){case"flag":return s([127987,65039,8205,9895,65039],[127987,65039,8203,9895,65039])?!1:!s([55356,56826,55356,56819],[55356,56826,8203,55356,56819])&&!s([55356,57332,56128,56423,56128,56418,56128,56421,56128,56430,56128,56423,56128,56447],[55356,57332,8203,56128,56423,8203,56128,56418,8203,56128,56421,8203,56128,56430,8203,56128,56423,8203,56128,56447]);case"emoji":return!s([10084,65039,8205,55357,56613],[10084,65039,8203,55357,56613])}return!1}(o[r]),t.supports.everything=t.supports.everything&&t.supports[o[r]],"flag"!==o[r]&&(t.supports.everythingExceptFlag=t.supports.everythingExceptFlag&&t.supports[o[r]]);t.supports.everythingExceptFlag=t.supports.everythingExceptFlag&&!t.supports.flag,t.DOMReady=!1,t.readyCallback=function(){t.DOMReady=!0},t.supports.everything||(n=function(){t.readyCallback()},a.addEventListener?(a.addEventListener("DOMContentLoaded",n,!1),e.addEventListener("load",n,!1)):(e.attachEvent("onload",n),a.attachEvent("onreadystatechange",function(){"complete"===a.readyState&&t.readyCallback()})),(n=t.source||{}).concatemoji?c(n.concatemoji):n.wpemoji&&n.twemoji&&(c(n.twemoji),c(n.wpemoji)))}(window,document,window._wpemojiSettings);
</script>
<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 0.07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
	<link rel='stylesheet' id='wp-block-library-css'  href='https://www.netnea.com/cms/wp-includes/css/dist/block-library/style.min.css?ver=5.9.3' type='text/css' media='all' />
<style id='global-styles-inline-css' type='text/css'>
body{--wp--preset--color--black: #000000;--wp--preset--color--cyan-bluish-gray: #abb8c3;--wp--preset--color--white: #ffffff;--wp--preset--color--pale-pink: #f78da7;--wp--preset--color--vivid-red: #cf2e2e;--wp--preset--color--luminous-vivid-orange: #ff6900;--wp--preset--color--luminous-vivid-amber: #fcb900;--wp--preset--color--light-green-cyan: #7bdcb5;--wp--preset--color--vivid-green-cyan: #00d084;--wp--preset--color--pale-cyan-blue: #8ed1fc;--wp--preset--color--vivid-cyan-blue: #0693e3;--wp--preset--color--vivid-purple: #9b51e0;--wp--preset--gradient--vivid-cyan-blue-to-vivid-purple: linear-gradient(135deg,rgba(6,147,227,1) 0%,rgb(155,81,224) 100%);--wp--preset--gradient--light-green-cyan-to-vivid-green-cyan: linear-gradient(135deg,rgb(122,220,180) 0%,rgb(0,208,130) 100%);--wp--preset--gradient--luminous-vivid-amber-to-luminous-vivid-orange: linear-gradient(135deg,rgba(252,185,0,1) 0%,rgba(255,105,0,1) 100%);--wp--preset--gradient--luminous-vivid-orange-to-vivid-red: linear-gradient(135deg,rgba(255,105,0,1) 0%,rgb(207,46,46) 100%);--wp--preset--gradient--very-light-gray-to-cyan-bluish-gray: linear-gradient(135deg,rgb(238,238,238) 0%,rgb(169,184,195) 100%);--wp--preset--gradient--cool-to-warm-spectrum: linear-gradient(135deg,rgb(74,234,220) 0%,rgb(151,120,209) 20%,rgb(207,42,186) 40%,rgb(238,44,130) 60%,rgb(251,105,98) 80%,rgb(254,248,76) 100%);--wp--preset--gradient--blush-light-purple: linear-gradient(135deg,rgb(255,206,236) 0%,rgb(152,150,240) 100%);--wp--preset--gradient--blush-bordeaux: linear-gradient(135deg,rgb(254,205,165) 0%,rgb(254,45,45) 50%,rgb(107,0,62) 100%);--wp--preset--gradient--luminous-dusk: linear-gradient(135deg,rgb(255,203,112) 0%,rgb(199,81,192) 50%,rgb(65,88,208) 100%);--wp--preset--gradient--pale-ocean: linear-gradient(135deg,rgb(255,245,203) 0%,rgb(182,227,212) 50%,rgb(51,167,181) 100%);--wp--preset--gradient--electric-grass: linear-gradient(135deg,rgb(202,248,128) 0%,rgb(113,206,126) 100%);--wp--preset--gradient--midnight: linear-gradient(135deg,rgb(2,3,129) 0%,rgb(40,116,252) 100%);--wp--preset--duotone--dark-grayscale: url('#wp-duotone-dark-grayscale');--wp--preset--duotone--grayscale: url('#wp-duotone-grayscale');--wp--preset--duotone--purple-yellow: url('#wp-duotone-purple-yellow');--wp--preset--duotone--blue-red: url('#wp-duotone-blue-red');--wp--preset--duotone--midnight: url('#wp-duotone-midnight');--wp--preset--duotone--magenta-yellow: url('#wp-duotone-magenta-yellow');--wp--preset--duotone--purple-green: url('#wp-duotone-purple-green');--wp--preset--duotone--blue-orange: url('#wp-duotone-blue-orange');--wp--preset--font-size--small: 13px;--wp--preset--font-size--medium: 20px;--wp--preset--font-size--large: 36px;--wp--preset--font-size--x-large: 42px;}.has-black-color{color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-color{color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-color{color: var(--wp--preset--color--white) !important;}.has-pale-pink-color{color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-color{color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-color{color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-color{color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-color{color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-color{color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-color{color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-color{color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-color{color: var(--wp--preset--color--vivid-purple) !important;}.has-black-background-color{background-color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-background-color{background-color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-background-color{background-color: var(--wp--preset--color--white) !important;}.has-pale-pink-background-color{background-color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-background-color{background-color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-background-color{background-color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-background-color{background-color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-background-color{background-color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-background-color{background-color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-background-color{background-color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-background-color{background-color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-background-color{background-color: var(--wp--preset--color--vivid-purple) !important;}.has-black-border-color{border-color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-border-color{border-color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-border-color{border-color: var(--wp--preset--color--white) !important;}.has-pale-pink-border-color{border-color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-border-color{border-color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-border-color{border-color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-border-color{border-color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-border-color{border-color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-border-color{border-color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-border-color{border-color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-border-color{border-color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-border-color{border-color: var(--wp--preset--color--vivid-purple) !important;}.has-vivid-cyan-blue-to-vivid-purple-gradient-background{background: var(--wp--preset--gradient--vivid-cyan-blue-to-vivid-purple) !important;}.has-light-green-cyan-to-vivid-green-cyan-gradient-background{background: var(--wp--preset--gradient--light-green-cyan-to-vivid-green-cyan) !important;}.has-luminous-vivid-amber-to-luminous-vivid-orange-gradient-background{background: var(--wp--preset--gradient--luminous-vivid-amber-to-luminous-vivid-orange) !important;}.has-luminous-vivid-orange-to-vivid-red-gradient-background{background: var(--wp--preset--gradient--luminous-vivid-orange-to-vivid-red) !important;}.has-very-light-gray-to-cyan-bluish-gray-gradient-background{background: var(--wp--preset--gradient--very-light-gray-to-cyan-bluish-gray) !important;}.has-cool-to-warm-spectrum-gradient-background{background: var(--wp--preset--gradient--cool-to-warm-spectrum) !important;}.has-blush-light-purple-gradient-background{background: var(--wp--preset--gradient--blush-light-purple) !important;}.has-blush-bordeaux-gradient-background{background: var(--wp--preset--gradient--blush-bordeaux) !important;}.has-luminous-dusk-gradient-background{background: var(--wp--preset--gradient--luminous-dusk) !important;}.has-pale-ocean-gradient-background{background: var(--wp--preset--gradient--pale-ocean) !important;}.has-electric-grass-gradient-background{background: var(--wp--preset--gradient--electric-grass) !important;}.has-midnight-gradient-background{background: var(--wp--preset--gradient--midnight) !important;}.has-small-font-size{font-size: var(--wp--preset--font-size--small) !important;}.has-medium-font-size{font-size: var(--wp--preset--font-size--medium) !important;}.has-large-font-size{font-size: var(--wp--preset--font-size--large) !important;}.has-x-large-font-size{font-size: var(--wp--preset--font-size--x-large) !important;}
</style>
<link rel='stylesheet' id='ce_responsive-css'  href='https://www.netnea.com/cms/wp-content/plugins/simple-embed-code/css/video-container.min.css?ver=5.9.3' type='text/css' media='all' />
<link rel='stylesheet' id='customizr-fa-css'  href='https://www.netnea.com/cms/wp-content/themes/customizr/assets/shared/fonts/fa/css/fontawesome-all.min.css?ver=4.4.20' type='text/css' media='all' />
<link rel='stylesheet' id='customizr-common-css'  href='https://www.netnea.com/cms/wp-content/themes/customizr/inc/assets/css/tc_common.min.css?ver=4.4.20' type='text/css' media='all' />
<link rel='stylesheet' id='customizr-skin-css'  href='https://www.netnea.com/cms/wp-content/themes/customizr-child/inc/assets/css/neagreen.min.css?ver=4.4.20' type='text/css' media='all' />
<style id='customizr-skin-inline-css' type='text/css'>

                  .site-title,.site-description,h1,h2,h3,.tc-dropcap {
                    font-family : 'Verdana','Geneva','sans-serif';
                    font-weight : inherit;
                  }

                  body,.navbar .nav>li>a {
                    font-family : 'Verdana','Geneva','sans-serif';
                    font-weight : inherit;
                  }

            body,.navbar .nav>li>a {
              font-size : 14px;
              line-height : 1.6em;
            }
table { border-collapse: separate; }
                           body table { border-collapse: collapse; }
                          
.social-links .social-icon:before { content: none } 
.sticky-enabled .tc-shrink-on .site-logo img {
    					height:30px!important;width:auto!important
    				}

    				.sticky-enabled .tc-shrink-on .brand .site-title {
    					font-size:0.6em;opacity:0.8;line-height:1.2em
    				}

          .comments-link .tc-comment-bubble {
            color: #F00;
            border: 2px solid #F00;
          }
          .comments-link .tc-comment-bubble:before {
            border-color: #F00;
          }
        
</style>
<link rel='stylesheet' id='customizr-style-css'  href='https://www.netnea.com/cms/wp-content/themes/customizr-child/style.css?ver=4.4.20' type='text/css' media='all' />
<link rel='stylesheet' id='fancyboxcss-css'  href='https://www.netnea.com/cms/wp-content/themes/customizr/assets/front/js/libs/fancybox/jquery.fancybox-1.3.4.min.css?ver=5.9.3' type='text/css' media='all' />
<script type='text/javascript' src='https://www.netnea.com/cms/wp-includes/js/jquery/jquery.min.js?ver=3.6.0' id='jquery-core-js'></script>
<script type='text/javascript' src='https://www.netnea.com/cms/wp-includes/js/jquery/jquery-migrate.min.js?ver=3.3.2' id='jquery-migrate-js'></script>
<script type='text/javascript' src='https://www.netnea.com/cms/wp-content/themes/customizr/assets/front/js/libs/fancybox/jquery.fancybox-1.3.4.min.js?ver=4.4.20' id='tc-fancybox-js'></script>
<script type='text/javascript' src='https://www.netnea.com/cms/wp-includes/js/underscore.min.js?ver=1.13.1' id='underscore-js'></script>
<script type='text/javascript' id='tc-scripts-js-extra'>
/* <![CDATA[ */
var TCParams = {"_disabled":[],"FancyBoxState":"1","FancyBoxAutoscale":"1","SliderName":"","SliderDelay":"","SliderHover":"1","centerSliderImg":"1","SmoothScroll":{"Enabled":true,"Options":{"touchpadSupport":false}},"anchorSmoothScroll":"linear","anchorSmoothScrollExclude":{"simple":["[class*=edd]",".tc-carousel-control",".carousel-control","[data-toggle=\"modal\"]","[data-toggle=\"dropdown\"]","[data-toggle=\"tooltip\"]","[data-toggle=\"popover\"]","[data-toggle=\"collapse\"]","[data-toggle=\"tab\"]","[data-toggle=\"pill\"]","[class*=upme]","[class*=um-]"],"deep":{"classes":[],"ids":[]}},"ReorderBlocks":"1","centerAllImg":"1","HasComments":"","LeftSidebarClass":".span3.left.tc-sidebar","RightSidebarClass":".span3.right.tc-sidebar","LoadModernizr":"1","stickyCustomOffset":{"_initial":0,"_scrolling":0,"options":{"_static":true,"_element":""}},"stickyHeader":"1","dropdowntoViewport":"0","timerOnScrollAllBrowsers":"1","extLinksStyle":"","extLinksTargetExt":"","extLinksSkipSelectors":{"classes":["btn","button"],"ids":[]},"dropcapEnabled":"","dropcapWhere":{"post":"","page":""},"dropcapMinWords":"50","dropcapSkipSelectors":{"tags":["IMG","IFRAME","H1","H2","H3","H4","H5","H6","BLOCKQUOTE","UL","OL"],"classes":["btn","tc-placeholder-wrap"],"id":[]},"imgSmartLoadEnabled":"","imgSmartLoadOpts":{"parentSelectors":[".article-container",".__before_main_wrapper",".widget-front"],"opts":{"excludeImg":[".tc-holder-img"]}},"imgSmartLoadsForSliders":"","goldenRatio":"1.618","gridGoldenRatioLimit":"350","isSecondMenuEnabled":"","secondMenuRespSet":"in-sn-before","isParallaxOn":"1","parallaxRatio":"0.55","pluginCompats":[],"adminAjaxUrl":"https:\/\/www.netnea.com\/cms\/wp-admin\/admin-ajax.php","ajaxUrl":"https:\/\/www.netnea.com\/cms\/?czrajax=1","frontNonce":{"id":"CZRFrontNonce","handle":"434f1a425a"},"isDevMode":"","isModernStyle":"","i18n":{"Permanently dismiss":"Permanently dismiss"},"version":"4.4.20","frontNotifications":{"styleSwitcher":{"enabled":false,"content":"","dismissAction":"dismiss_style_switcher_note_front","ajaxUrl":"https:\/\/www.netnea.com\/cms\/wp-admin\/admin-ajax.php"}}};
/* ]]> */
</script>
<script type='text/javascript' src='https://www.netnea.com/cms/wp-content/themes/customizr/inc/assets/js/tc-scripts.min.js?ver=4.4.20' id='tc-scripts-js'></script>
<link rel="https://api.w.org/" href="https://www.netnea.com/cms/wp-json/" /><link rel="alternate" type="application/json" href="https://www.netnea.com/cms/wp-json/wp/v2/pages/1391" /><link rel="EditURI" type="application/rsd+xml" title="RSD" href="https://www.netnea.com/cms/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="https://www.netnea.com/cms/wp-includes/wlwmanifest.xml" /> 
<meta name="generator" content="WordPress 5.9.3" />
<link rel="canonical" href="https://www.netnea.com/cms/nginx-tutorial-2_minimal-nginx-configuration/" />
<link rel='shortlink' href='https://www.netnea.com/cms/?p=1391' />
<link rel="icon" href="https://www.netnea.com/cms/wp-content/uploads/2015/10/test6.png" sizes="32x32" />
<link rel="icon" href="https://www.netnea.com/cms/wp-content/uploads/2015/10/test6.png" sizes="192x192" />
<link rel="apple-touch-icon" href="https://www.netnea.com/cms/wp-content/uploads/2015/10/test6.png" />
<meta name="msapplication-TileImage" content="https://www.netnea.com/cms/wp-content/uploads/2015/10/test6.png" />
	</head>
	
	<body class="page-template-default page page-id-1391 wp-embed-responsive tc-fade-hover-links tc-l-sidebar tc-center-images skin-neagreen customizr-4-4-20-with-child-theme tc-sticky-header sticky-disabled tc-transparent-on-scroll tc-regular-menu" >
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 0 0" width="0" height="0" focusable="false" role="none" style="visibility: hidden; position: absolute; left: -9999px; overflow: hidden;" ><defs><filter id="wp-duotone-dark-grayscale"><feColorMatrix color-interpolation-filters="sRGB" type="matrix" values=" .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 " /><feComponentTransfer color-interpolation-filters="sRGB" ><feFuncR type="table" tableValues="0 0.49803921568627" /><feFuncG type="table" tableValues="0 0.49803921568627" /><feFuncB type="table" tableValues="0 0.49803921568627" /><feFuncA type="table" tableValues="1 1" /></feComponentTransfer><feComposite in2="SourceGraphic" operator="in" /></filter></defs></svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 0 0" width="0" height="0" focusable="false" role="none" style="visibility: hidden; position: absolute; left: -9999px; overflow: hidden;" ><defs><filter id="wp-duotone-grayscale"><feColorMatrix color-interpolation-filters="sRGB" type="matrix" values=" .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 " /><feComponentTransfer color-interpolation-filters="sRGB" ><feFuncR type="table" tableValues="0 1" /><feFuncG type="table" tableValues="0 1" /><feFuncB type="table" tableValues="0 1" /><feFuncA type="table" tableValues="1 1" /></feComponentTransfer><feComposite in2="SourceGraphic" operator="in" /></filter></defs></svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 0 0" width="0" height="0" focusable="false" role="none" style="visibility: hidden; position: absolute; left: -9999px; overflow: hidden;" ><defs><filter id="wp-duotone-purple-yellow"><feColorMatrix color-interpolation-filters="sRGB" type="matrix" values=" .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 " /><feComponentTransfer color-interpolation-filters="sRGB" ><feFuncR type="table" tableValues="0.54901960784314 0.98823529411765" /><feFuncG type="table" tableValues="0 1" /><feFuncB type="table" tableValues="0.71764705882353 0.25490196078431" /><feFuncA type="table" tableValues="1 1" /></feComponentTransfer><feComposite in2="SourceGraphic" operator="in" /></filter></defs></svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 0 0" width="0" height="0" focusable="false" role="none" style="visibility: hidden; position: absolute; left: -9999px; overflow: hidden;" ><defs><filter id="wp-duotone-blue-red"><feColorMatrix color-interpolation-filters="sRGB" type="matrix" values=" .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 " /><feComponentTransfer color-interpolation-filters="sRGB" ><feFuncR type="table" tableValues="0 1" /><feFuncG type="table" tableValues="0 0.27843137254902" /><feFuncB type="table" tableValues="0.5921568627451 0.27843137254902" /><feFuncA type="table" tableValues="1 1" /></feComponentTransfer><feComposite in2="SourceGraphic" operator="in" /></filter></defs></svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 0 0" width="0" height="0" focusable="false" role="none" style="visibility: hidden; position: absolute; left: -9999px; overflow: hidden;" ><defs><filter id="wp-duotone-midnight"><feColorMatrix color-interpolation-filters="sRGB" type="matrix" values=" .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 " /><feComponentTransfer color-interpolation-filters="sRGB" ><feFuncR type="table" tableValues="0 0" /><feFuncG type="table" tableValues="0 0.64705882352941" /><feFuncB type="table" tableValues="0 1" /><feFuncA type="table" tableValues="1 1" /></feComponentTransfer><feComposite in2="SourceGraphic" operator="in" /></filter></defs></svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 0 0" width="0" height="0" focusable="false" role="none" style="visibility: hidden; position: absolute; left: -9999px; overflow: hidden;" ><defs><filter id="wp-duotone-magenta-yellow"><feColorMatrix color-interpolation-filters="sRGB" type="matrix" values=" .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 " /><feComponentTransfer color-interpolation-filters="sRGB" ><feFuncR type="table" tableValues="0.78039215686275 1" /><feFuncG type="table" tableValues="0 0.94901960784314" /><feFuncB type="table" tableValues="0.35294117647059 0.47058823529412" /><feFuncA type="table" tableValues="1 1" /></feComponentTransfer><feComposite in2="SourceGraphic" operator="in" /></filter></defs></svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 0 0" width="0" height="0" focusable="false" role="none" style="visibility: hidden; position: absolute; left: -9999px; overflow: hidden;" ><defs><filter id="wp-duotone-purple-green"><feColorMatrix color-interpolation-filters="sRGB" type="matrix" values=" .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 " /><feComponentTransfer color-interpolation-filters="sRGB" ><feFuncR type="table" tableValues="0.65098039215686 0.40392156862745" /><feFuncG type="table" tableValues="0 1" /><feFuncB type="table" tableValues="0.44705882352941 0.4" /><feFuncA type="table" tableValues="1 1" /></feComponentTransfer><feComposite in2="SourceGraphic" operator="in" /></filter></defs></svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 0 0" width="0" height="0" focusable="false" role="none" style="visibility: hidden; position: absolute; left: -9999px; overflow: hidden;" ><defs><filter id="wp-duotone-blue-orange"><feColorMatrix color-interpolation-filters="sRGB" type="matrix" values=" .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 " /><feComponentTransfer color-interpolation-filters="sRGB" ><feFuncR type="table" tableValues="0.098039215686275 1" /><feFuncG type="table" tableValues="0 0.66274509803922" /><feFuncB type="table" tableValues="0.84705882352941 0.41960784313725" /><feFuncA type="table" tableValues="1 1" /></feComponentTransfer><feComposite in2="SourceGraphic" operator="in" /></filter></defs></svg>        <a class="screen-reader-text skip-link" href="#content">Skip to content</a>
        
    <div id="tc-page-wrap" class="">

  		
  	   	<header class="tc-header clearfix row-fluid tc-tagline-off tc-title-logo-on  tc-shrink-on tc-menu-on logo-left tc-second-menu-in-sn-before-when-mobile">
  			
        <div class="brand span3 pull-left">
        <a class="site-logo" href="https://www.netnea.com/cms/" aria-label="Welcome to netnea | Network Management. Security. OpenSource."><img src="https://www.netnea.com/cms/wp-content/uploads/2015/10/netnealogo300_nobg.png" alt="Back Home" width="300" height="95"   class=" attachment-645"/></a>        </div> <!-- brand span3 -->

        <div class="container outside"><h2 class="site-description">Network Management. Security. OpenSource.</h2></div>      	<div class="navbar-wrapper clearfix span9 tc-submenu-fade tc-submenu-move tc-open-on-click left">
        	<div class="navbar resp">
          		<div class="navbar-inner" role="navigation">
            		<div class="row-fluid">
              		<h2 class="span7 inside site-description">Network Management. Security. OpenSource.</h2><div class="nav-collapse collapse"><div class="menu-main-menu-container"><ul id="menu-main-menu-2" class="nav"><li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-home menu-item-50"><a href="https://www.netnea.com/cms/">HOME</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children dropdown menu-item-103"><a class="dropdown-toggle" data-toggle="dropdown" data-target="#" href="https://www.netnea.com/cms/services/">SERVICES <strong class="caret"></strong></a>
<ul class="dropdown-menu">
	<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-138"><a href="https://www.netnea.com/cms/web-security/">Web Security</a></li>
	<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-139"><a href="https://www.netnea.com/cms/linux-system-management/">Linux / Unix System Management</a></li>
	<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-140"><a href="https://www.netnea.com/cms/network-management/">Network Management</a></li>
</ul>
</li>
<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children dropdown menu-item-49"><a class="dropdown-toggle" data-toggle="dropdown" data-target="#" href="https://www.netnea.com/cms/netnea-the-team/">TEAM <strong class="caret"></strong></a>
<ul class="dropdown-menu">
	<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-232"><a href="https://www.netnea.com/cms/netnea-the-team/charles-bueche/">Charles Bueche</a></li>
	<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-235"><a href="https://www.netnea.com/cms/netnea-the-team/jiri-dvorak/">Jiri Dvorak</a></li>
	<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-233"><a href="https://www.netnea.com/cms/netnea-the-team/christian-folini/">Christian Folini</a></li>
	<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-236"><a href="https://www.netnea.com/cms/netnea-the-team/nicolas-mader/">Nicolas Mäder</a></li>
	<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-234"><a href="https://www.netnea.com/cms/netnea-the-team/christian-ramseyer/">Christian Ramseyer</a></li>
	<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1431"><a href="https://www.netnea.com/cms/netnea-the-team/simon-studer/">Simon Studer</a></li>
	<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-365"><a href="https://www.netnea.com/cms/netnea-the-team/marcela-dvorakova/">Marcela Dvorakova</a></li>
</ul>
</li>
<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children dropdown menu-item-225"><a class="dropdown-toggle" data-toggle="dropdown" data-target="#" href="https://www.netnea.com/cms/customers/">ABOUT <strong class="caret"></strong></a>
<ul class="dropdown-menu">
	<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-237"><a href="https://www.netnea.com/cms/netnea-the-team/">About Us</a></li>
	<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-226"><a href="https://www.netnea.com/cms/customers/">Customers</a></li>
	<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-231"><a href="https://www.netnea.com/cms/contact/">Contact</a></li>
</ul>
</li>
</ul></div></div><div class="btn-toggle-nav pull-right"><button type="button" class="btn menu-btn" data-toggle="collapse" data-target=".nav-collapse" title="Open the menu" aria-label="Open the menu"><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span> </button></div>          			</div><!-- /.row-fluid -->
          		</div><!-- /.navbar-inner -->
        	</div><!-- /.navbar resp -->
      	</div><!-- /.navbar-wrapper -->
    	  		</header>
  		<div id="tc-reset-margin-top" class="container-fluid" style="margin-top:103px"></div><div id="main-wrapper" class="container">

    
    <div class="container" role="main">
        <div class="row column-content-wrapper">

            
        <div class="span3 left tc-sidebar">
           <div id="left" class="widget-area" role="complementary">
              <aside id="nav_menu-5" class="widget widget_nav_menu"><h3 class="widget-title">features</h3><div class="menu-features-container"><ul id="menu-features" class="menu"><li id="menu-item-1647" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1647"><a href="https://www.netnea.com/cms/courses/">Security Courses</a></li>
<li id="menu-item-1631" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1631"><a href="https://www.netnea.com/cms/tutorials/">ModSecurity / CRS Tutorials</a></li>
<li id="menu-item-1632" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1632"><a href="https://www.netnea.com/cms/tutorials/">Apache / NGINX Tutorials</a></li>
<li id="menu-item-1151" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1151"><a href="https://www.netnea.com/cms/core-rule-set-inventory/">ModSecurity CRS Rules Inventory</a></li>
<li id="menu-item-1361" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1361"><a href="https://www.netnea.com/cms/subscribe-to-newsletter/">ModSecurity / CRS Newsletter</a></li>
</ul></div></aside>
		<aside id="recent-posts-2" class="widget widget_recent_entries">
		<h3 class="widget-title">latest posts</h3>
		<ul>
											<li>
					<a href="https://www.netnea.com/cms/2022/06/30/kubuntu-to-arch-linux/">Kubuntu to Arch Linux</a>
									</li>
											<li>
					<a href="https://www.netnea.com/cms/2022/03/09/ansible-end_play-vs-end_host/">Ansible end_play vs end_host</a>
									</li>
											<li>
					<a href="https://www.netnea.com/cms/2022/01/20/decrypt-tls-encrypted-http-traffic-for-debugging/">Decrypt TLS encrypted HTTP traffic for debugging</a>
									</li>
					</ul>

		</aside><aside id="categories-5" class="widget widget_categories"><h3 class="widget-title">blogs</h3>
			<ul>
					<li class="cat-item cat-item-59"><a href="https://www.netnea.com/cms/category/ansible/">Ansible</a> (1)
</li>
	<li class="cat-item cat-item-44"><a href="https://www.netnea.com/cms/category/databases/">Databases</a> (1)
</li>
	<li class="cat-item cat-item-5"><a href="https://www.netnea.com/cms/category/linux/">Linux</a> (13)
</li>
	<li class="cat-item cat-item-3"><a href="https://www.netnea.com/cms/category/nms/">NMS</a> (21)
</li>
	<li class="cat-item cat-item-47"><a href="https://www.netnea.com/cms/category/python/">Python</a> (2)
</li>
	<li class="cat-item cat-item-4"><a href="https://www.netnea.com/cms/category/security/">Security</a> (40)
</li>
			</ul>

			</aside>            </div><!-- //#left or //#right -->
        </div><!--.tc-sidebar -->

        
                <div id="content" class="span9 article-container tc-gallery-style">

                    
                        
                                                                                    
                                                                    <article id="page-1391" class="row-fluid post-1391 page type-page status-publish czr-hentry">
                                                <header class="entry-header">
          <h1 class="entry-title format-icon">Minimal NGINX Configuration</h1><hr class="featurette-divider __before_content">        </header>
        
        <div class="entry-content">
          <html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><style>
body{
	font-family: Helvetica, Arial, Sans-Serif;
}
.cmd{
	background-color: #FFFFC0;
	font-family: Courier New, Courier,mono,Sans-Serif;
	border: 1px dashed gray;
	padding: 0.6em;
}
.cmd-response{
	background-color: #C0FFC0;
	font-family: Courier New, Courier,mono,Sans-Serif;
	border: 1px dashed gray;
	padding: 0.6em;
}
.cmd-responsefail{
	background-color: #FFC0C0;
	font-family: Courier New, Courier,mono,Sans-Serif;
	border: 1px dashed gray;
	padding: 0.6em;
}
.caption{
	font-size: x-small;
	font-style: italic;
}
.floatbox{
	float: right;
	background-color: #EEFFFF;
	border: 1px solid lightgray;
	padding: 0.6em;
}
img{
	border: 1px solid lightgray;
}
</style>

</head><body><h2>Configuring a minimal NGINX server</h2>
<h3>What are we doing?</h3>
<p>We are configuring a minimal NGINX web server and will occasionally be talking to it with curl and siege.</p>
<h3>Why are we doing this?</h3>
<p>A secure server is one that permits only as much as what is really needed. Ideally, you would build a server based on a minimal system by enabling additional features individually. This is also preferable in terms of understanding what’s going on, because this is the only way of knowing what is really configured.
Starting with a minimal system is also helpful in debugging. If the error is not present in the minimal system, features are added individually and the search for the error goes on. When the error occurs, it is identified to be related to the last configuration directive added.</p>
<h3>Requirements</h3>
<ul>
<li>An NGINX web server, ideally one created using the file structure shown in <a href="https://www.netnea.com/cms/nginx-tutorial-1_compiling-nginx">Tutorial 1 (Compiling a NGINX web server)</a>.</li>
</ul>
<h3>Step 1: Creating a minimal configuration</h3>
<p>Our web server is stored in <code>/nginx</code> on the file system. It’s default configuration is located in <code>/nginx/conf/httpd.conf</code>. That configuration is okay, even if it is a bit untidy. We can do better and replace it with a very brief configuration that is right to the point. NGINX plays into our arms by coming with sane default values. 
This allows us to be very terse.</p>
<pre><code class="language-bash">daemon            off;
worker_processes  2;
user              www-data;

events {
    use           epoll;
    worker_connections  128;
}

error_log         logs/error.log info;

http {
    server_tokens off;
    include       mime.types;
    charset       utf-8;

    access_log    logs/access.log  combined;

    server {
        server_name   localhost;
        listen        127.0.0.1:80;

        error_page    500 502 503 504  /50x.html;

        location      / {
            root      html;
        }

    }

}
</code></pre>
<h3>Step 2: Understanding the configuration</h3>
<p>Let’s go through this configuration step-by-step.</p>
<p>We start off the configuration with the directive <code>daemon</code>. A webserver process is generally a process that runs int he background, it's a unix daemon. Here we tell NGINX to stay in the foreground. This is helpful in a lab setup as we can stop the server with <code>CTRL-c</code> that way and we are always sure if it is running or not. The directive <code>worker_processes</code> tells the master process to spawn two processes that will handle the HTTP calls. And then the <code>user</code> directive that assigns the user <code>nobody</code> with the <code>nogroup</code> as its group. What's this? A webserver facing the internet generally listens on privileged ports 80 for starters and then 443 for encrypted traffic. A privileged port can only be bound by the root user, that's why you need to start the server with <code>sudo</code>. However, we do not want to perform the serving with the root user. So that NGINX does, it is forking server processes and has them run under a different user. And here we define this user to be <code>www-data</code>; a user that comes installed on the system. The user <code>www-data</code> is a non-privileged user with minimal rights. Perfect for our use case from a security perspective.</p>
<p>The next block introduced by <code>events</code> defines a context that specifies the handling of connection events; new requests coming in. We assign the <code>epoll</code> event model that is the most performing model on new Linux system. This defines how the server process and the kernel communicate with one another when a new connection is being initiated. And finally, we use <code>worker_connections</code> to define 128 workers per server process. So we have a master process that spawn two worker processes and each of these will accept up to 128 connections.</p>
<p>The directive <code>error_log</code> defines the verbosity of the error log. In the first We compiled the server with the compile option <code>--with-debug</code>. This is a precondition to be able to enable the log level <code>debug</code> here. The other levels ordered by severity are <code>info</code>, <code>notice</code>, <code>warn</code>, <code>error</code>, <code>crit</code>, <code>alert</code>, and <code>emerg</code>.</p>
<p>Then we launch a big block with the <code>http</code> directive. This tells the server that we want to handle http requests and we initiate a configuration context specifying the details. First, we tell the server to restrict server tokens. This is meant to keep the HTTP <code>server</code> header to a minimum. A server needs to identify its software in the response. By default, NGINX responds with it's server version. This could be an information leakage, so we disable this and the response header will now be reduced to <code>nginx</code>.</p>
<p>The inclusion of the <code>mime.types</code> in the configuration folder helps the server map filename extensions to mime types in the response. Setting The correct mime on the other hand helps a browser display a response correctly. On the next line, we tell the server that we generally work with UTF-8. So in addition to the mime type, the HTTP response header will also indicate this charset to the client.</p>
<p>We proceed to the server context that specifies how the HTTP requests are being handled. We call our server <code>localhost</code> for the time being and we instruct it to listen on the localhost interface, TCP port 80. Then we instruct the server to be ready to serve a custom error page for all the HTTP error status codes. That is 500 and above. 500, 502, 503 und 504 should all be handled by an error page 50x.html that came with our NGINX installation.</p>
<p>The <code>location</code> block that follows maps the document root folder <code>/</code> to the relative folder <code>html</code>. In our setup this resolves to <code>/nginx/html</code> on the file system.</p>
<p>And with this, we're already done with this basic configuration.</p>
<h3>Step 3: Starting the server</h3>
<p>Our minimal server has thus been described. It would be possible to define a server that is even more bare bones. It would however not be as comfortable to work with as ours and it would not be any more secure. A certain amount of basic security is however advisable. This is because in the lab we are building a service which should then with specific adjustments be able to be put into a production environment. Wanting to secure a service from top to bottom right before entering a production environment is illusory.</p>
<p>Let’s now start the server in the foreground and not as a daemon:</p>
<pre><code class="language-bash">$&gt; cd /nginx
$&gt; sudo bin/nginx</code></pre>
<h3>Step 4: Talking to the server using curl</h3>
<p>Now we can again communicate with the server from a web browser. But working in the shell at first can be more effective, making it easier to understand what is going on.</p>
<pre><code class="language-bash">$&gt; curl http://localhost/index.html</code></pre>
<p>Returns the following:</p>
<pre><code class="language-bash">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
&lt;title&gt;Welcome to nginx!&lt;/title&gt;
&lt;style&gt;
    body {
        width: 35em;
        margin: 0 auto;
        font-family: Tahoma, Verdana, Arial, sans-serif;
    }
&lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h1&gt;Welcome to nginx!&lt;/h1&gt;
&lt;p&gt;If you see this page, the nginx web server is successfully installed and
working. Further configuration is required.&lt;/p&gt;

&lt;p&gt;For online documentation and support please refer to
&lt;a href="http://nginx.org/"&gt;nginx.org&lt;/a&gt;.&lt;br/&gt;
Commercial support is available at
&lt;a href="http://nginx.com/"&gt;nginx.com&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Thank you for using nginx.&lt;/em&gt;&lt;/p&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
<p>We have thus sent an HTTP request and have received a response from our minimally configured server, meeting our expectations.</p>
<h3>Step 5: Examining requests and responses</h3>
<p>This is what happens during an HTTP request. But what exactly is the server saying to us? To find out, let’s start <em>curl</em>. This time with the <em>verbose</em> option.</p>
<pre><code class="language-bash">$&gt; curl --verbose http://localhost/index.html
*   Trying 127.0.0.1...
* Connected to localhost (127.0.0.1) port 80 (#0)
&gt; GET /index.html HTTP/1.1
&gt; Host: localhost
&gt; User-Agent: curl/7.47.0
&gt; Accept: */*
&gt; 
&lt; HTTP/1.1 200 OK
&lt; Server: nginx
&lt; Date: Thu, 01 Mar 2018 20:53:15 GMT
&lt; Content-Type: text/html; charset=utf-8
&lt; Content-Length: 612
&lt; Last-Modified: Thu, 01 Mar 2018 09:55:09 GMT
&lt; Connection: keep-alive
&lt; ETag: "5a97cdfd-264"
&lt; Accept-Ranges: bytes
&lt; 
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
&lt;title&gt;Welcome to nginx!&lt;/title&gt;
&lt;style&gt;
    body {
        width: 35em;
        margin: 0 auto;
        font-family: Tahoma, Verdana, Arial, sans-serif;
    }
&lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h1&gt;Welcome to nginx!&lt;/h1&gt;
&lt;p&gt;If you see this page, the nginx web server is successfully installed and
working. Further configuration is required.&lt;/p&gt;

&lt;p&gt;For online documentation and support please refer to
&lt;a href="http://nginx.org/"&gt;nginx.org&lt;/a&gt;.&lt;br/&gt;
Commercial support is available at
&lt;a href="http://nginx.com/"&gt;nginx.com&lt;/a&gt;.&lt;/p&gt;</code></pre>
<p>The lines marked with a asterisk (*) describe messages concerning opening and closing the connection. They do not reflect network traffic. The request follows > and the response <.</p>
<p>Specifically, an HTTP request comprises 4 parts:</p>
<ul>
<li>Request line and request header</li>
<li>Request body (optional and missing here for a GET request)</li>
<li>Response header</li>
<li>Response body</li>
</ul>
<p>We don’t have to worry about the first parts just yet. It’s the <em>response headers</em> that are interesting. This is the part used by the web server to describe the response. The actual response, the <em>response body</em>, follows after an empty line.</p>
<p>In order, what do the headers mean?</p>
<p>At first comes the <em>status</em> line including the <em>protocol</em>, the version, followed by the <em>status code</em>. <em>200 OK</em> is the normal response from a web server. Then comes the <em>server</em> line immediately. Here, our NGINX web server identifies itself. This is the shortest possible identification. We have defined it using _server<em>tokens</em> above.
On the next line we see the date and time as defined on the server.</p>
<p>The next line brings the Content-Type of the response, extended to include the charset UTF-8 as well. And then follows the Content-Length. This is interesting. It specifies how many bytes to expect in the <em>response body</em>. 612 bytes in our case.
The server will then tell us when the file the response is based on was last changed, i.e. the <em>Unix modified timestamp</em>. <em>Connection</em>, <em>ETag</em> and <em>Accept-Ranges</em> don’t require our attention for the moment. </p>
<p>Incidentally, the order of these headers is characteristic for web servers. <em>Apache</em> uses a different order and, for instance, puts the date before the <em>server header</em> and that is hard-wired into the binary without a config option to change it. So even if we would change the identification to mislead a potential attacker, we would still be able to identify NGINX. So it's not worth bothering.</p>
<h3>Step 6: Examining the response a bit more closely</h3>
<p>During communication it is possible to get a somewhat more detailed view in <em>curl</em>. We use the <em>--trace-ascii</em> command line parameter to do this:</p>
<pre><code class="language-bash">$&gt; curl   http://localhost/index.html --trace-ascii -
Warning: --trace-ascii overrides an earlier trace/verbose option
== Info:   Trying 127.0.0.1...
== Info: Connected to localhost (127.0.0.1) port 80 (#0)
=&gt; Send header, 83 bytes (0x53)
0000: GET /index.html HTTP/1.1
001a: Host: localhost
002b: User-Agent: curl/7.47.0
0044: Accept: */*
0051: 
&lt;= Recv header, 17 bytes (0x11)
0000: HTTP/1.1 200 OK
&lt;= Recv header, 15 bytes (0xf)
0000: Server: nginx
&lt;= Recv header, 37 bytes (0x25)
0000: Date: Thu, 01 Mar 2018 21:01:37 GMT
&lt;= Recv header, 40 bytes (0x28)
0000: Content-Type: text/html; charset=utf-8
&lt;= Recv header, 21 bytes (0x15)
0000: Content-Length: 612
&lt;= Recv header, 46 bytes (0x2e)
0000: Last-Modified: Thu, 01 Mar 2018 09:55:09 GMT
&lt;= Recv header, 24 bytes (0x18)
0000: Connection: keep-alive
&lt;= Recv header, 22 bytes (0x16)
0000: ETag: "5a97cdfd-264"
&lt;= Recv header, 22 bytes (0x16)
0000: Accept-Ranges: bytes
&lt;= Recv header, 2 bytes (0x2)
0000: 
&lt;= Recv data, 612 bytes (0x264)
0000: &lt;!DOCTYPE html&gt;.&lt;html&gt;.&lt;head&gt;.&lt;title&gt;Welcome to nginx!&lt;/title&gt;.&lt;
0040: style&gt;.    body {.        width: 35em;.        margin: 0 auto;. 
0080:        font-family: Tahoma, Verdana, Arial, sans-serif;.    }.&lt;/
00c0: style&gt;.&lt;/head&gt;.&lt;body&gt;.&lt;h1&gt;Welcome to nginx!&lt;/h1&gt;.&lt;p&gt;If you see t
0100: his page, the nginx web server is successfully installed and.wor
0140: king. Further configuration is required.&lt;/p&gt;..&lt;p&gt;For online docu
0180: mentation and support please refer to.&lt;a href="http://nginx.org/
01c0: "&gt;nginx.org&lt;/a&gt;.&lt;br/&gt;.Commercial support is available at.&lt;a href
0200: ="http://nginx.com/"&gt;nginx.com&lt;/a&gt;.&lt;/p&gt;..&lt;p&gt;&lt;em&gt;Thank you for us
0240: ing nginx.&lt;/em&gt;&lt;/p&gt;.&lt;/body&gt;.&lt;/html&gt;.
...</code></pre>
<p><em>--trace-ascii</em> requires a file as a parameter in order to make an <em>ASCII dump</em> of communication in it. "-" works as a shortcut for <em>STDOUT</em>, enabling us to easily see what is being logged.</p>
<p>Compared to <em>verbose</em>, <em>trace-ascii</em> provides more details about the length of transferred bytes in the <em>request</em> and <em>response</em> phase. The request headers in the example above are thus 83 bytes. The bytes are then listed for each header in the response and overall for the body in the response: 612 bytes. This may seem like we are splitting hairs. But in fact, it can be crucial when something is missing and it is not quite certain what or where in the sequence it was delivered. Thus, it’s worth noting that 2 bytes are added to each header line. These are the CR (carriage returns) and NL (new lines) in the header lines included in the HTTP protocol. This is different in the response body, which returns only what is actually in the file. This is obviously only one NL without CR here. On the last line qupted (<em>0240: ing nginx.</em>) a point comes after the greater than character. This is code for the NL character in the response, which like other escape sequences is output in the form of a point.</p>
<h3>Step 7: Using "siege" to test the server</h3>
<p>So much for the simple server. But just for fun we can put it to the test. We’ll perform a small performance test using <em>siege</em>. This is a fairly simple benchmarking program able to quickly give you initial performance results. I like to run a little performance test before and after a configuration change to get an idea about whether anything in terms of performance has changed. <em>siege</em> is very powerful and calling it locally does not give you clean results. But you can get an initial impression using this tool.</p>
<pre><code class="language-bash">$&gt; siege --concurrent 100 --reps 10 http://localhost/index.html</code></pre>
<p>We are starting <em>siege</em> using <em>concurrency 100</em>. The means that we are executing 100 requests at a time. In total, we will be executing 100 x 10 requests from the known <em>URL</em>. This is the output from <em>siege</em>:</p>
<pre><code class="language-bash">** SIEGE 3.0.8
** Preparing 100 concurrent users for battle.
The server is now under siege..      done.

Transactions:                   1000 hits
Availability:                 100.00 %
Elapsed time:                   9.02 secs
Data transferred:               0.58 MB
Response time:                  0.00 secs
Transaction rate:             110.86 trans/sec
Throughput:                     0.06 MB/sec
Concurrency:                    0.36
Successful transactions:        1000
Failed transactions:               0
Longest transaction:            0.02
Shortest transaction:           0.00
 
FILE: /var/log/siege.log
You can disable this annoying message by editing
the .siegerc file in your home directory; change
the directive 'show-logfile' to false.
[error] unable to create log file: /var/log/siege.log: Permission denied
</code></pre>
<p>What’s of primary interest to us is the number of errors (<em>Failed requests</em>) and the number of requests per second (<em>Requests per second</em>). We are not getting very high with our configuration since we defined the error log level <em>debug</em> which is a horrible performance hog.</p>
<p>That's it for this lesson. I hope you learnt something even if much of it was repetition.</p>
<h3>References</h3>
<ul>
<li>NGINX: <a href="http://nginx.org"><a href="https://nginx.org">https://nginx.org</a></a></li>
<li>NGINX directives: <a href="https://nginx.org/en/docs/dirindex.html"><a href="https://nginx.org/en/docs/dirindex.html">https://nginx.org/en/docs/dirindex.html</a></a></li>
<li>HTTP headers: <a href="http://en.wikipedia.org/wiki/List_of_HTTP_header_fields"><a href="https://en.wikipedia.org/wiki/List_of_HTTP_header_fields">https://en.wikipedia.org/wiki/List_of_HTTP_header_fields</a></a></li>
<li>RFC 2616 (HTTP protocol): (<a href="http://www.ietf.org/rfc/rfc2616.txt](http://www.ietf.org/rfc/rfc2616.txt">http://www.ietf.org/rfc/rfc2616.txt](http://www.ietf.org/rfc/rfc2616.txt</a>)</li>
</ul>
<h3>License / Copying / Further use</h3>
<a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/80x15.png" /></a><br />This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License</a>.</body></html>
        </div>

                                            </article>
                                
                            
                        
                    
                                   <hr class="featurette-divider tc-mobile-separator">
                </div><!--.article-container -->

           
        </div><!--.row -->
    </div><!-- .container role: main -->

    
</div><!-- //#main-wrapper -->

  		<!-- FOOTER -->
  		<footer id="footer" class="">
  		 					<div class="container footer-widgets ">
                    <div class="row widget-area" role="complementary">
												
							<div id="footer_one" class="span4">
																
										<aside id="text-3" class="widget widget_text"><h3 class="widget-title">Contact</h3>			<div class="textwidget"><center>Gartenstadtstrasse 29<br>CH-3097 Liebefeld<br><font color=b4d012>Phone</font>&nbsp;+41&nbsp;31&nbsp;974&nbsp;08&nbsp;08<br>
<font color=b4d012>Email</font>&nbsp;<a href="mailto:info@netnea.com">info@netnea.com</a></b></center></div>
		</aside>
																							</div><!-- .{$key}_widget_class -->

						
							<div id="footer_two" class="span4">
																															</div><!-- .{$key}_widget_class -->

						
							<div id="footer_three" class="span4">
																
										<aside id="tag_cloud-2" class="widget widget_tag_cloud"><h3 class="widget-title">Tags</h3><div class="tagcloud"><a href="https://www.netnea.com/cms/tag/ansible/" class="tag-cloud-link tag-link-45 tag-link-position-1" style="font-size: 10.571428571429pt;" aria-label="Ansible (2 items)">Ansible</a>
<a href="https://www.netnea.com/cms/tag/apache/" class="tag-cloud-link tag-link-9 tag-link-position-2" style="font-size: 14.857142857143pt;" aria-label="apache (5 items)">apache</a>
<a href="https://www.netnea.com/cms/tag/automation/" class="tag-cloud-link tag-link-50 tag-link-position-3" style="font-size: 8pt;" aria-label="automation (1 item)">automation</a>
<a href="https://www.netnea.com/cms/tag/cisco/" class="tag-cloud-link tag-link-22 tag-link-position-4" style="font-size: 10.571428571429pt;" aria-label="Cisco (2 items)">Cisco</a>
<a href="https://www.netnea.com/cms/tag/core-rules/" class="tag-cloud-link tag-link-33 tag-link-position-5" style="font-size: 19.142857142857pt;" aria-label="core-rules (11 items)">core-rules</a>
<a href="https://www.netnea.com/cms/tag/core-rule-set/" class="tag-cloud-link tag-link-41 tag-link-position-6" style="font-size: 8pt;" aria-label="Core Rule Set (1 item)">Core Rule Set</a>
<a href="https://www.netnea.com/cms/tag/crs/" class="tag-cloud-link tag-link-35 tag-link-position-7" style="font-size: 10.571428571429pt;" aria-label="CRS (2 items)">CRS</a>
<a href="https://www.netnea.com/cms/tag/crs3/" class="tag-cloud-link tag-link-36 tag-link-position-8" style="font-size: 12.285714285714pt;" aria-label="CRS3 (3 items)">CRS3</a>
<a href="https://www.netnea.com/cms/tag/ddos/" class="tag-cloud-link tag-link-39 tag-link-position-9" style="font-size: 8pt;" aria-label="DDoS (1 item)">DDoS</a>
<a href="https://www.netnea.com/cms/tag/django/" class="tag-cloud-link tag-link-48 tag-link-position-10" style="font-size: 8pt;" aria-label="Django (1 item)">Django</a>
<a href="https://www.netnea.com/cms/tag/drupal/" class="tag-cloud-link tag-link-34 tag-link-position-11" style="font-size: 8pt;" aria-label="drupal (1 item)">drupal</a>
<a href="https://www.netnea.com/cms/tag/enigma-enigma2017/" class="tag-cloud-link tag-link-38 tag-link-position-12" style="font-size: 8pt;" aria-label="enigma enigma2017 (1 item)">enigma enigma2017</a>
<a href="https://www.netnea.com/cms/tag/firewall/" class="tag-cloud-link tag-link-19 tag-link-position-13" style="font-size: 8pt;" aria-label="firewall (1 item)">firewall</a>
<a href="https://www.netnea.com/cms/tag/modrewrite/" class="tag-cloud-link tag-link-42 tag-link-position-14" style="font-size: 8pt;" aria-label="ModRewrite (1 item)">ModRewrite</a>
<a href="https://www.netnea.com/cms/tag/modsecurity/" class="tag-cloud-link tag-link-10 tag-link-position-15" style="font-size: 21.285714285714pt;" aria-label="modsecurity (16 items)">modsecurity</a>
<a href="https://www.netnea.com/cms/tag/ncs/" class="tag-cloud-link tag-link-32 tag-link-position-16" style="font-size: 8pt;" aria-label="NCS (1 item)">NCS</a>
<a href="https://www.netnea.com/cms/tag/nervecenter/" class="tag-cloud-link tag-link-11 tag-link-position-17" style="font-size: 8pt;" aria-label="nervecenter (1 item)">nervecenter</a>
<a href="https://www.netnea.com/cms/tag/netdisco/" class="tag-cloud-link tag-link-7 tag-link-position-18" style="font-size: 12.285714285714pt;" aria-label="netdisco (3 items)">netdisco</a>
<a href="https://www.netnea.com/cms/tag/nftables/" class="tag-cloud-link tag-link-20 tag-link-position-19" style="font-size: 8pt;" aria-label="nftables (1 item)">nftables</a>
<a href="https://www.netnea.com/cms/tag/nms/" class="tag-cloud-link tag-link-27 tag-link-position-20" style="font-size: 12.285714285714pt;" aria-label="NMS (3 items)">NMS</a>
<a href="https://www.netnea.com/cms/tag/oin/" class="tag-cloud-link tag-link-28 tag-link-position-21" style="font-size: 8pt;" aria-label="OIN (1 item)">OIN</a>
<a href="https://www.netnea.com/cms/tag/opensource/" class="tag-cloud-link tag-link-29 tag-link-position-22" style="font-size: 8pt;" aria-label="OpenSource (1 item)">OpenSource</a>
<a href="https://www.netnea.com/cms/tag/owasp-top10/" class="tag-cloud-link tag-link-40 tag-link-position-23" style="font-size: 8pt;" aria-label="OWASP Top10 (1 item)">OWASP Top10</a>
<a href="https://www.netnea.com/cms/tag/postgresql/" class="tag-cloud-link tag-link-49 tag-link-position-24" style="font-size: 8pt;" aria-label="PostgreSQL (1 item)">PostgreSQL</a>
<a href="https://www.netnea.com/cms/tag/proxmox/" class="tag-cloud-link tag-link-51 tag-link-position-25" style="font-size: 8pt;" aria-label="Proxmox (1 item)">Proxmox</a>
<a href="https://www.netnea.com/cms/tag/python-3/" class="tag-cloud-link tag-link-46 tag-link-position-26" style="font-size: 8pt;" aria-label="Python 3 (1 item)">Python 3</a>
<a href="https://www.netnea.com/cms/tag/qos/" class="tag-cloud-link tag-link-21 tag-link-position-27" style="font-size: 10.571428571429pt;" aria-label="QoS (2 items)">QoS</a>
<a href="https://www.netnea.com/cms/tag/risks/" class="tag-cloud-link tag-link-30 tag-link-position-28" style="font-size: 10.571428571429pt;" aria-label="Risks (2 items)">Risks</a>
<a href="https://www.netnea.com/cms/tag/sampling-mode/" class="tag-cloud-link tag-link-53 tag-link-position-29" style="font-size: 8pt;" aria-label="Sampling Mode (1 item)">Sampling Mode</a>
<a href="https://www.netnea.com/cms/tag/security-2/" class="tag-cloud-link tag-link-15 tag-link-position-30" style="font-size: 22pt;" aria-label="security (18 items)">security</a>
<a href="https://www.netnea.com/cms/tag/ssl/" class="tag-cloud-link tag-link-54 tag-link-position-31" style="font-size: 8pt;" aria-label="ssl (1 item)">ssl</a>
<a href="https://www.netnea.com/cms/tag/ssltls/" class="tag-cloud-link tag-link-43 tag-link-position-32" style="font-size: 10.571428571429pt;" aria-label="SSL/TLS (2 items)">SSL/TLS</a>
<a href="https://www.netnea.com/cms/tag/swiss-cyber-experts/" class="tag-cloud-link tag-link-25 tag-link-position-33" style="font-size: 10.571428571429pt;" aria-label="Swiss Cyber Experts (2 items)">Swiss Cyber Experts</a>
<a href="https://www.netnea.com/cms/tag/switzerland/" class="tag-cloud-link tag-link-31 tag-link-position-34" style="font-size: 8pt;" aria-label="Switzerland (1 item)">Switzerland</a>
<a href="https://www.netnea.com/cms/tag/syslog/" class="tag-cloud-link tag-link-14 tag-link-position-35" style="font-size: 8pt;" aria-label="syslog (1 item)">syslog</a>
<a href="https://www.netnea.com/cms/tag/tcpdump/" class="tag-cloud-link tag-link-56 tag-link-position-36" style="font-size: 8pt;" aria-label="tcpdump (1 item)">tcpdump</a>
<a href="https://www.netnea.com/cms/tag/tls/" class="tag-cloud-link tag-link-58 tag-link-position-37" style="font-size: 8pt;" aria-label="tls (1 item)">tls</a>
<a href="https://www.netnea.com/cms/tag/tshark/" class="tag-cloud-link tag-link-57 tag-link-position-38" style="font-size: 8pt;" aria-label="tshark (1 item)">tshark</a>
<a href="https://www.netnea.com/cms/tag/typo3/" class="tag-cloud-link tag-link-37 tag-link-position-39" style="font-size: 8pt;" aria-label="typo3 (1 item)">typo3</a>
<a href="https://www.netnea.com/cms/tag/ubuntu/" class="tag-cloud-link tag-link-13 tag-link-position-40" style="font-size: 10.571428571429pt;" aria-label="ubuntu (2 items)">ubuntu</a>
<a href="https://www.netnea.com/cms/tag/wireshark/" class="tag-cloud-link tag-link-55 tag-link-position-41" style="font-size: 8pt;" aria-label="wireshark (1 item)">wireshark</a>
<a href="https://www.netnea.com/cms/tag/zenoss/" class="tag-cloud-link tag-link-12 tag-link-position-42" style="font-size: 8pt;" aria-label="zenoss (1 item)">zenoss</a></div>
</aside>
																							</div><!-- .{$key}_widget_class -->

																	</div><!-- .row.widget-area -->
				</div><!--.footer-widgets -->
				    				 <div class="colophon">
			 	<div class="container">
			 		<div class="row-fluid">
					    <div class="span3 social-block pull-left"></div><div class="span6 credits"><p>&middot; <span class="tc-copyright-text">&copy; 2022</span> <a href="https://www.netnea.com/cms" title="Welcome to netnea" rel="bookmark">Welcome to netnea</a> &middot; <span class="tc-wp-powered-text">Powered by</span> <a class="icon-wordpress" target="_blank" rel="noopener noreferrer" href="https://wordpress.org" title="Powered by WordPress"></a> &middot; <span class="tc-credits-text">Designed with the <a class="czr-designer-link" href="https://presscustomizr.com/customizr" title="Customizr theme">Customizr theme</a> </span> &middot;</p></div>	      			</div><!-- .row-fluid -->
	      		</div><!-- .container -->
	      	</div><!-- .colophon -->
	    	  		</footer>
    </div><!-- //#tc-page-wrapper -->
		<!-- Matomo -->
<script>
  var _paq = window._paq = window._paq || [];
  /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
  _paq.push(['trackPageView']);
  _paq.push(['enableLinkTracking']);
  (function() {
    var u="https://piwik.netnea.com/matomo/";
    _paq.push(['setTrackerUrl', u+'matomo.php']);
    _paq.push(['setSiteId', '2']);
    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
    g.async=true; g.src=u+'matomo.js'; s.parentNode.insertBefore(g,s);
  })();
</script>
<noscript><p><img src="//piwik.netnea.com/matomo/matomo.php?idsite=2" style="border:0;" alt="" /></p></noscript>
<!-- End Matomo Code -->

<script type='text/javascript' src='https://www.netnea.com/cms/wp-includes/js/comment-reply.min.js?ver=5.9.3' id='comment-reply-js'></script>
<script type='text/javascript' src='https://www.netnea.com/cms/wp-includes/js/jquery/ui/core.min.js?ver=1.13.1' id='jquery-ui-core-js'></script>
<script type='text/javascript' src='https://www.netnea.com/cms/wp-content/themes/customizr/assets/front/js/libs/modernizr.min.js?ver=4.4.20' id='modernizr-js'></script>
<script type='text/javascript' src='https://www.netnea.com/cms/wp-content/themes/customizr/assets/front/js/libs/retina.min.js?ver=4.4.20' id='retinajs-js'></script>
<div id="tc-footer-btt-wrapper" class="tc-btt-wrapper right"><i class="btt-arrow"></i></div>	</body>
	</html>